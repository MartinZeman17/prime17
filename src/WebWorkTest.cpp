#include "WebWork.hpp"
#include "WorkerStruct.hpp"



void WebBitStatistics(WorkerStruct &w){

    WebWork WW;
    // todo break ??
    
    while(w.ThreadsPct()>0) {
        Log::out().init();
        WW.WebBitStatisticsWork(w);   
    } 
}


void RunCheckComputation(){

    
// beg
// 140730000014073

// end
// 140737488355327

// Begin: 140730000014073B    


// ︠5a38efe8-3d8e-4530-bf59-6c0b1f4def4a︠
// Begin: 140733744184700                                                                                             | 0:#____________________________________ 4.5%  8.1m 
// End:   140735616270014   

// Begin: 140735616270014                                                                                             | 0:#################____________________46.3%  1.6m 
// End:   140736552312671                                                                                             | 1:#################____________________48.4%  1.5m 
// Sieve Prime: 19 Primorial: 9 699 690                                                                               | 2:################_____________________45.3%  1.7m 
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       | 3:################_____________________44.3%  1.7m 
// Begin in percent:  99.9986698                                                                                      | 4:#################____________________47.4%  1.5m 
// End in percent:    99.9993349                                                                                      | 5:##################___________________49.4%  1.4m 
// Sieve Begin: 281 473 104 625 342                                                                                   | 6:###############______________________42.2%  1.9m 
// Sieve End  : 281 474 040 667 999                                                                                   | 7:###############______________________43.2%  1.8m 
// Sieve End-Begin: 936 042 657 
// 28137894



// Begin: 140736552312671                                                                                             | 0:##############################_______83.4%  0.3m 
// End:   140737020333999                                                                                             | 1:#################################____89.6%  0.2m 
// Sieve Prime: 19 Primorial: 9 699 690                                                                               | 2:#################################____91.7%  0.2m 
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       | 3:##################################___93.7%  0.1m 
// Begin in percent:  99.9993349                                                                                      | 4:################################_____87.5%  0.2m 
// End in percent:    99.9996675                                                                                      | 5:###############################______85.5%  0.3m 
// Sieve Begin: 281 474 040 667 999                                                                                   | 6:###################################__95.8%  0.1m 
// Sieve End  : 281 474 508 689 327                                                                                   | 7:####################################_97.9%  0.1m 
// Sieve End-Begin: 468 021 328   
// 14064662

// Begin: 140737020333999                                                                                             | 0:############_________________________33.1%  0.5m 
// End:   140737254344663                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               | 2:###__________________________________ 8.3%  2.6m 
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       | 3:####_________________________________12.4%  1.7m 
// Begin in percent:  99.9996675                                                                                      | 4:######_______________________________16.5%  1.3m 
// End in percent:    99.9998337                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   | 6:#########____________________________24.8%  0.8m 
// Sieve End  : 281 474 742 699 991                                                                                   | 7:##########___________________________29.0%  0.6m 
// Sieve End-Begin: 234 010 664  
// 7031825 
// 7031824

// Begin: 140737020333999                                                                                             | 0:_____________________________________ 0.0%  0.0m 
// End:   140737137339331                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9997506                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 625 694 659                                                                                   |
// Sieve End-Begin: 117 005 332 
// 3516158 
// 3516157


// Begin: 140737020333999                                                                                             | 0:_____________________________________ 0.0%  0.0m 
// End:   140737078836665                                                                                             | 1:######_______________________________16.6%  0.9m 
// Sieve Prime: 19 Primorial: 9 699 690                                                                               | 2:############_________________________33.2%  0.4m 
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       | 3:##################___________________49.8%  0.2m 
// Begin in percent:  99.9996675                                                                                      | 4:########################_____________66.3%  0.1m 
// End in percent:    99.9997090                                                                                      | 5:##############################_______82.9%  0.1m 
// Sieve Begin: 281 474 508 689 327                                                                                   | 6:####################################_99.5%  0.1m 
// Sieve End  : 281 474 567 191 993                                                                                   |
// Sieve End-Begin: 58 502 666    
// 1757498
// 1757497

// Begin: 140737020333999                                                                                             | 0:_____________________________________ 0.1%  0.0m 
// End:   140737049585332                                                                                             | 1:############_________________________33.3%  0.3m 
// Sieve Prime: 19 Primorial: 9 699 690                                                                               | 2:########################_____________66.4%  0.1m 
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       | 3:####################################_99.6%  0.1m 
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996882                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 537 940 660                                                                                   |
// Sieve End-Begin: 29 251 333 
// 878857
// 878856


// Begin: 140737020333999                                                                                             | 0:_____________________________________ 0.3%  0.0m 
// End:   140737034959666                                                                                             | 1:########################_____________66.6%  0.1m 
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996778                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 523 314 994                                                                                   |
// Sieve End-Begin: 14 625 667  
// 439521
// 439520

// Begin: 140737020333999                                                                                             | 0:_____________________________________ 0.6%  0.0m 
// End:   140737027646833                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996726                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 516 002 161                                                                                   |
// Sieve End-Begin: 7 312 834  
// 220229
// 220228


// Begin: 140737020333999                                                                                             | 0:_____________________________________ 1.2%  0.1m 
// End:   140737023990416                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996700                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 512 345 744                                                                                   |
// Sieve End-Begin: 3 656 417 
// 110093
// 110092

// Begin: 140737020333999                                                                                             | 0:_____________________________________ 2.5%  0.1m 
// End:   140737022162208                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996687                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 510 517 536                                                                                   |
// Sieve End-Begin: 1 828 209  
// 55070
// 55069


// Begin: 140737020333999                                                                                             | 0:#____________________________________ 5.0%  0.1m 
// End:   140737021248104                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996681                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 509 603 432                                                                                   |
// Sieve End-Begin: 914 105  
// 27498
// 27497


// Begin: 140737020333999                                                                                             | 0:###__________________________________10.0%  0.1m 
// End:   140737020791052                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996678                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 509 146 380                                                                                   |
// Sieve End-Begin: 457 053   
// 13692
// 13691

// Begin: 140737020333999                                                                                             | 0:#######______________________________20.1%  0.1m 
// End:   140737020562526                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996676                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 508 917 854                                                                                   |
// Sieve End-Begin: 228 527  
// 6815
// 6814


// Begin: 140737020333999                                                                                             | 0:##############_______________________40.3%  0.1m 
// End:   140737020448263                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996675                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 508 803 591                                                                                   |
// Sieve End-Begin: 114 264 
// 3410
// 3409


// Begin: 140737020333999                                                                                             | 0:#############################________80.6%  0.1m 
// End:   140737020391131                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996675                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 508 746 459                                                                                   |
// Sieve End-Begin: 57 132  
// 1737  
// 1736  


// Begin: 140737020333999                                                                                             |
// End:   140737020362565                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996675                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 508 717 893                                                                                   |
// Sieve End-Begin: 28 566 
// 883
// 882

// Begin: 140737020333999                                                                                             |
// End:   140737020348282                                                                                             |
// Sieve Prime: 19 Primorial: 9 699 690                                                                               |
// Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
// Begin in percent:  99.9996675                                                                                      |
// End in percent:    99.9996675                                                                                      |
// Sieve Begin: 281 474 508 689 327                                                                                   |
// Sieve End  : 281 474 508 703 610                                                                                   |
// Sieve End-Begin: 14 283 
// 439


Begin: 140737020333999                                                                                             |
End:   140737020341141                                                                                             |
Sieve Prime: 19 Primorial: 9 699 690                                                                               |
Coprimes #: 1 658 880 Effectivity %: 17.1024                                                                       |
Begin in percent:  99.9996675                                                                                      |
End in percent:    99.9996675                                                                                      |
Sieve Begin: 281 474 508 689 327                                                                                   |
Sieve End  : 281 474 508 696 469                                                                                   |
Sieve End-Begin: 7 142
225




    WebGetWork GetWork;
    GetWork.c_power2 = 47;
    GetWork.new_begin = 140730000014073ULL;
    GetWork.new_begin = 140733744184700ULL; //polovina
    GetWork.new_begin = 140735616270014ULL; //    3/4
    GetWork.new_begin = 140736552312671ULL; //    7/8
    GetWork.new_begin = 140737020333999ULL; //    9/16   


    GetWork.new_end =   140737488355327ULL;
    GetWork.new_end =   140737254344663ULL;
    GetWork.new_end =   140737137339331ULL;
    GetWork.new_end =   140737078836665ULL;
    GetWork.new_end =   140737049585332ULL;
    GetWork.new_end =   140737034959666ULL;
    GetWork.new_end =   140737027646833ULL;
    GetWork.new_end =   140737023990416ULL;
    GetWork.new_end =   140737022162208ULL;
    GetWork.new_end =   140737021248104ULL;
    GetWork.new_end =   140737020791052ULL;
    GetWork.new_end =   140737020562526ULL;
    GetWork.new_end =   140737020448263ULL;
    GetWork.new_end =   140737020391131ULL;
    GetWork.new_end =   140737020362565ULL;
    GetWork.new_end =   140737020348282ULL;

    GetWork.new_end =   140737020348282ULL;


    GetWork.new_end -= (GetWork.new_end - GetWork.new_begin)/2;

    Log::out() << "Begin: " << GetWork.new_begin << "\n";
    Log::out() << "End:   " << GetWork.new_end << "\n";


    GeneratorFunctionBitStatistics BSMT(GetWork.c_power2 );
    SieveGenerator<unsigned long long> Sieve(C_SieveGeneratorDefaultMaxPrime);
    Sieve.Threads(100);

    unsigned long long Offset = static_cast<unsigned long long>(1) << GetWork.c_power2 ;
    Log::out() << "Begin in percent: " << utils_str::FormatNumber( ((long double) 100.0 * GetWork.new_begin ) / (long double) Offset, 11,7) << "\n";
    Log::out() << "End in percent:   " << utils_str::FormatNumber( ((long double) 100.0 * GetWork.new_end ) / (long double) Offset, 11,7) << "\n";
    Sieve.WorkMT(Offset + GetWork.new_begin, Offset + GetWork.new_end, BSMT);

    Log::out() << "Primes:   " << BSMT.PrimesCnt() << "\n";
    
// primes
// 225 070 932

// 112529532

// 112529532

// 56273165  
// 56273165

// 28137894
// 28137894
}
